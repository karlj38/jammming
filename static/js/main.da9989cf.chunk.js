(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(8),i=n.n(s),o=(n(15),n(16),n(2)),u=n.n(o),l=n(3),d=n(9),f=n(4),h="https://accounts.spotify.com/authorize?client_id=".concat("f3920987d31f4b4e9261a062e26e13f1","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("http://localhost:3000/"),p=0,j={login:function(){window.location=h},getToken:function(e){if(e)return e;var t=window.location.href;if(t.includes("access_token")){var n=t.indexOf("access_token")+"access_token".length+1,r=t.indexOf("&token_type");e=t.substring(n,r);var a=t.indexOf("expires_in")+"expires_in".length+1,c=t.indexOf("&state");return p=1e3*Number(t.substring(a,c)),setTimeout((function(){e=""}),p),e}},search:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&n){r.next=2;break}return r.abrupt("return",[]);case 2:return a=[],r.next=5,fetch("https://api.spotify.com/v1/search?type=track&q=".concat(t,":").concat(e),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(e.ok)return e.json();throw new Error("req failed")}),(function(){return console.log("network error")})).then((function(e){if(!e.tracks)return[];a=e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))}));case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},getUserId:function(e){return Object(l.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n="",t.next=5,fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){if(e.ok)return e.json();throw new Error("req failed")}),(function(){return console.log("network error")}));case 5:return r=t.sent,n=r.id,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()},createNewPlaylist:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var a,c,s;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t&&n){r.next=3;break}return alert("Invalid submission - No playlist name given"),r.abrupt("return");case 3:return a="https://api.spotify.com/v1/users/".concat(e,"/playlists"),r.next=6,fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify({name:t})}).then((function(e){if(e.ok)return e.json();throw new Error("req failed")}),(function(){return console.log("network error")}));case 6:return c=r.sent,s=c.id,r.abrupt("return",s);case 9:case"end":return r.stop()}}),r)})))()},addTracksToPlaylist:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var a,c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t&&n){r.next=3;break}return alert("Invalid submission - No tracks in playlist"),r.abrupt("return");case 3:return a=e.join(","),c="https://api.spotify.com/v1/playlists/".concat(t,"/tracks?uris=").concat(a),r.next=7,fetch(c,{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});case 7:case"end":return r.stop()}}),r)})))()},save:function(e,t,n){var r=this;return Object(l.a)(u.a.mark((function a(){var c,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t&&n){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,r.getUserId(n);case 6:return c=a.sent,a.next=9,r.createNewPlaylist(c,e,n);case 9:s=a.sent,r.addTracksToPlaylist(t,s,n),console.log("done");case 12:case"end":return a.stop()}}),a)})))()}};n(18),n(19);var b=function(e){function t(t){var n=t.target;e.setSearchOption(n.innerHTML),e.search(n.innerHTML)}return Object(r.jsx)("div",{style:{display:e.isLoggedIn?"":"none"},children:["album","artist","track"].map((function(n,a){return Object(r.jsx)("button",{className:e.searchOption===n?"SearchButton SearchOption active":"SearchButton SearchOption",onClick:t,children:n},a)}))})};var m=function(e){return Object(r.jsxs)("div",{className:"SearchBar",children:[Object(r.jsx)("input",{placeholder:"Enter A Song, Album, or Artist",value:e.searchTerm,onChange:function(t){var n=t.target;e.setSearchTerm(n.value)},style:{display:e.isLoggedIn?"":"none"},onKeyPress:function(t){"Enter"===t.key&&(console.log("bar",e.searchOption),e.search(e.searchOption))}}),Object(r.jsx)(b,{searchOption:e.searchOption,setSearchOption:e.setSearchOption,isLoggedIn:e.isLoggedIn,search:e.search}),!e.isLoggedIn&&Object(r.jsx)("button",{className:"SearchButton",onClick:function(){j.login()},children:"LOGIN"})]})};n(20),n(21);var O=function(e){return Object(r.jsxs)("div",{className:"Track",children:[Object(r.jsxs)("div",{className:"Track-information",children:[Object(r.jsx)("h3",{children:e.track.name}),Object(r.jsxs)("p",{children:[e.track.artist," | ",e.track.album]})]}),Object(r.jsx)("button",{className:"Track-action",onClick:e.isRemoval?function(){e.removeTrack(e.track)}:function(){e.addTrack(e.track)},children:e.isRemoval?"-":"+"})]})};var v=function(e){return Object(r.jsx)("div",{className:"TrackList",children:e.results.map((function(t){return Object(r.jsx)(O,{track:t,addTrack:e.addTrack,isRemoval:e.isRemoval,removeTrack:e.removeTrack},t.id)}))})};n(22);var k=function(e){return Object(r.jsxs)("div",{className:"SearchResults",children:[Object(r.jsxs)("h2",{children:["Search Results by"," ",Object(r.jsx)("span",{style:{textTransform:"capitalize"},children:e.searchOption})]}),Object(r.jsx)(v,{results:e.results,addTrack:e.addTrack,isRemoval:!1})]})};n(23);var x=function(e){return Object(r.jsxs)("form",{className:"Playlist",onSubmit:function(){e.savePlaylist()},children:[Object(r.jsx)("input",{placeholder:"Enter Playlist Name",value:e.playlistName,onChange:function(t){var n=t.target;e.updatePlaylistName(n.value)},required:!0}),Object(r.jsx)(v,{results:e.playlistTracks,removeTrack:e.removeTrack,isRemoval:!0}),Object(r.jsx)("button",{className:"Playlist-save",style:{display:e.playlistTracks.length?"":"none"},children:"SAVE TO SPOTIFY"})]})};n(24);var y=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(f.a)(s,2),o=i[0],h=i[1],p=Object(a.useState)([]),b=Object(f.a)(p,2),O=b[0],v=b[1],y=Object(a.useState)(""),g=Object(f.a)(y,2),T=g[0],w=g[1],S=Object(a.useState)(!1),N=Object(f.a)(S,2),I=N[0],L=N[1],P=Object(a.useState)(""),A=Object(f.a)(P,2),B=A[0],E=A[1],R=Object(a.useState)("track"),_=Object(f.a)(R,2),z=_[0],C=_[1];function q(){return(q=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.map((function(e){return e.uri})),e.next=3,j.save(o,t,B);case 3:h(""),v([]),c([]),w("");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.search(T,t,B);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return document.addEventListener("DOMContentLoaded",(function(){var e=j.getToken();e&&(E(e),L(!0))})),Object(r.jsxs)("div",{children:[Object(r.jsxs)("h1",{children:["Ja",Object(r.jsx)("span",{className:"highlight",children:"mmm"}),"ing"]}),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(m,{search:function(e){return J.apply(this,arguments)},searchTerm:T,setSearchTerm:w,isLoggedIn:I,setIsLoggedIn:L,Spotify:j,searchOption:z,setSearchOption:C}),Object(r.jsxs)("div",{className:"App-playlist",style:{display:n.length?"":"none"},children:[Object(r.jsx)(k,{results:n,addTrack:function(e){O.find((function(t){return t.id===e.id}))||v([].concat(Object(d.a)(O),[e]))},isLoggedIn:I,searchOption:z}),Object(r.jsx)(x,{playlistName:o,playlistTracks:O,removeTrack:function(e){v(O.filter((function(t){return t.id!==e.id})))},updatePlaylistName:function(e){h(e)},savePlaylist:function(){return q.apply(this,arguments)},isLoggedIn:I,searchResults:k})]})]})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.da9989cf.chunk.js.map
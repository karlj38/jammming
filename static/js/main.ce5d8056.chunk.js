(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(9),i=n.n(s),o=(n(16),n(17),n(2)),u=n.n(o),l=n(4),p=n(10),d=n(3),f="https://accounts.spotify.com/authorize?client_id=".concat("f3920987d31f4b4e9261a062e26e13f1","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("https://karlj38.github.io/jammming/"),h=0,j={login:function(){window.location=f},getToken:function(e){if(e)return e;var t=window.location.href;if(t.includes("access_token")){var n=t.indexOf("access_token")+"access_token".length+1,r=t.indexOf("&token_type");e=t.substring(n,r);var a=t.indexOf("expires_in")+"expires_in".length+1,c=t.indexOf("&state");return h=1e3*Number(t.substring(a,c)),setTimeout((function(){e=""}),h),e}},search:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&n){r.next=2;break}return r.abrupt("return",[]);case 2:return a=[],r.next=5,fetch("https://api.spotify.com/v1/search?type=track&q=".concat(t,":").concat(e),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(e.ok)return e.json();throw new Error("req failed")}),(function(){return console.log("network error")})).then((function(e){if(!e.tracks)return[];a=e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri,preview:e.preview_url}}))}));case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},getUserId:function(e){return Object(l.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n="",t.next=5,fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){if(e.ok)return e.json();throw new Error("req failed")}),(function(){return console.log("network error")}));case 5:return r=t.sent,n=r.id,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()},createNewPlaylist:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var a,c,s;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t&&n){r.next=3;break}return alert("Invalid submission - No playlist name given"),r.abrupt("return");case 3:return a="https://api.spotify.com/v1/users/".concat(e,"/playlists"),r.next=6,fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify({name:t})}).then((function(e){if(e.ok)return e.json();throw new Error("req failed")}),(function(){return console.log("network error")}));case 6:return c=r.sent,s=c.id,r.abrupt("return",s);case 9:case"end":return r.stop()}}),r)})))()},addTracksToPlaylist:function(e,t,n){return Object(l.a)(u.a.mark((function r(){var a,c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t&&n){r.next=3;break}return alert("Invalid submission - No tracks in playlist"),r.abrupt("return");case 3:return a=e.join(","),c="https://api.spotify.com/v1/playlists/".concat(t,"/tracks?uris=").concat(a),r.next=7,fetch(c,{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});case 7:case"end":return r.stop()}}),r)})))()},save:function(e,t,n){var r=this;return Object(l.a)(u.a.mark((function a(){var c,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t&&n){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,r.getUserId(n);case 6:return c=a.sent,a.next=9,r.createNewPlaylist(c,e,n);case 9:s=a.sent,r.addTracksToPlaylist(t,s,n),console.log("done");case 12:case"end":return a.stop()}}),a)})))()}};n(19),n(20);var m=function(e){function t(t){var n=t.target;e.setSearchOption(n.innerHTML),e.search(n.innerHTML)}return Object(r.jsx)("div",{style:{display:e.isLoggedIn?"":"none"},children:["album","artist","track"].map((function(n,a){return Object(r.jsx)("button",{className:e.searchOption===n?"SearchButton SearchOption active":"SearchButton SearchOption",onClick:t,children:n},a)}))})};var b=function(e){return Object(r.jsxs)("div",{className:"SearchBar",children:[Object(r.jsx)("input",{placeholder:"Enter A Song, Album, or Artist",value:e.searchTerm,onChange:function(t){var n=t.target;e.setSearchTerm(n.value)},style:{display:e.isLoggedIn?"":"none"},onKeyPress:function(t){"Enter"===t.key&&(console.log("bar",e.searchOption),e.search(e.searchOption))}}),Object(r.jsx)(m,{searchOption:e.searchOption,setSearchOption:e.setSearchOption,isLoggedIn:e.isLoggedIn,search:e.search}),!e.isLoggedIn&&Object(r.jsx)("button",{className:"SearchButton",onClick:function(){j.login()},children:"LOGIN"})]})},O=(n(21),n(8));n(22);var v=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],s=n[1];function i(){c?(document.getElementById(e.id).pause(),s(!1)):(document.getElementById(e.id).play(),s(!0))}return Object(r.jsxs)("div",{className:"Track",style:{display:!e.isRemoval&&e.playlistTracks.find((function(t){return t.id===e.track.id}))?"none":null},children:[Object(r.jsxs)("div",{className:"Track-information",children:[Object(r.jsx)("h3",{children:e.track.name}),Object(r.jsxs)("p",{children:[e.track.artist," | ",e.track.album]})]}),!e.isRemoval&&e.track.preview&&!c&&Object(r.jsx)(O.b,{onClick:i}),!e.isRemoval&&e.track.preview&&c&&Object(r.jsx)(O.a,{onClick:i}),Object(r.jsx)("audio",{id:e.id,src:e.track.preview,className:"preview"}),Object(r.jsx)("button",{className:"Track-action",onClick:e.isRemoval?function(){e.removeTrack(e.track)}:function(){e.addTrack(e.track)},children:e.isRemoval?"-":"+"})]})};var k=function(e){return Object(r.jsx)("div",{className:"TrackList",children:e.results.map((function(t){return Object(r.jsx)(v,{track:t,id:t.id,addTrack:e.addTrack,isRemoval:e.isRemoval,removeTrack:e.removeTrack,playlistTracks:e.playlistTracks},t.id)}))})};n(23);var y=function(e){return Object(r.jsxs)("div",{className:"SearchResults",children:[Object(r.jsxs)("h2",{children:["Search Results by"," ",Object(r.jsx)("span",{style:{textTransform:"capitalize"},children:e.searchOption})]}),Object(r.jsx)(k,{results:e.results,addTrack:e.addTrack,isRemoval:!1,playlistTracks:e.playlistTracks})]})};n(24);var x=function(e){return Object(r.jsxs)("form",{className:"Playlist",onSubmit:function(t){t.preventDefault(),e.savePlaylist()},children:[Object(r.jsx)("input",{placeholder:"Enter Playlist Name",value:e.playlistName,onChange:function(t){var n=t.target;e.updatePlaylistName(n.value)},required:!0}),Object(r.jsx)(k,{results:e.playlistTracks,removeTrack:e.removeTrack,isRemoval:!0,playlistTracks:e.playlistTracks}),Object(r.jsx)("button",{className:"Playlist-save",style:{display:e.playlistTracks.length?"":"none"},type:"submit",children:"SAVE TO SPOTIFY"})]})};n(25);var g=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(d.a)(s,2),o=i[0],f=i[1],h=Object(a.useState)([]),m=Object(d.a)(h,2),O=m[0],v=m[1],k=Object(a.useState)(""),g=Object(d.a)(k,2),T=g[0],w=g[1],S=Object(a.useState)(!1),N=Object(d.a)(S,2),I=N[0],L=N[1],P=Object(a.useState)(""),R=Object(d.a)(P,2),B=R[0],E=R[1],A=Object(a.useState)("track"),_=Object(d.a)(A,2),C=_[0],z=_[1];function q(){return(q=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.map((function(e){return e.uri})),e.next=3,j.save(o,t,B);case 3:f(""),v([]),c([]),w("");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.search(T,t,B);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return document.addEventListener("DOMContentLoaded",(function(){var e=j.getToken();e&&(E(e),L(!0))})),Object(r.jsxs)("div",{children:[Object(r.jsxs)("h1",{children:["Ja",Object(r.jsx)("span",{className:"highlight",children:"mmm"}),"ing"]}),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(b,{search:function(e){return J.apply(this,arguments)},searchTerm:T,setSearchTerm:w,isLoggedIn:I,setIsLoggedIn:L,Spotify:j,searchOption:C,setSearchOption:z}),Object(r.jsxs)("div",{className:"App-playlist",style:{display:n.length?"":"none"},children:[Object(r.jsx)(y,{results:n,addTrack:function(e){O.find((function(t){return t.id===e.id}))||v([].concat(Object(p.a)(O),[e]))},isLoggedIn:I,searchOption:C,playlistTracks:O}),Object(r.jsx)(x,{playlistName:o,playlistTracks:O,removeTrack:function(e){v(O.filter((function(t){return t.id!==e.id})))},updatePlaylistName:function(e){f(e)},savePlaylist:function(){return q.apply(this,arguments)},isLoggedIn:I,searchResults:y})]})]})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.ce5d8056.chunk.js.map